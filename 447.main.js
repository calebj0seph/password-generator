!function(){"use strict";var e=function(e){return e>=48&&e<=57?"digit":e>=65&&e<=90?"uppercase":e>=97&&e<=122?"lowercase":e>=32&&e<=47||e>=58&&e<=64||e>=91&&e<=96||e>=123&&e<=126?"symbol":null},s={buffer:new Uint8Array(65536),numRead:65536};function a(){s.numRead>=s.buffer.length&&(self.crypto.getRandomValues(s.buffer),s.numRead=0);var e=s.buffer[s.numRead];return s.numRead+=1,e}function t(e,s){var t=s-e+1,r=0;do{r=a()}while(r>Math.floor(256/t)*t-1);return r%t+e}function r(s,a){for(var t=new Map,r=0;r<s.length;r+=1){var n=e(s.charCodeAt(r));t.has(n)?t.set(n,t.get(n)+1):t.set(n,1)}var o=t.get("digit")||0,u=t.get("symbol")||0,g=t.get("lowercase")||0,i=g+(t.get("uppercase")||0);return!(a.useDigits&&!(o/s.length>=a.minDigitProportion)||a.useSymbols&&a.symbols.length>0&&!(u/s.length>=a.minSymbolProportion)||i>0&&a.useUppercase&&a.useLowercase&&!(2*Math.abs(g/i-.5)<=a.maxCaseVariance))}function n(e,s){for(var a="",r=0;r<e;r+=1)a+=s[t(0,s.length-1)];return a}self.addEventListener("message",(function(e){if("REQUEST_GENERATE_PASSWORD"===e.data.messageType)try{var s=function(e,s){var a=Date.now(),t="";e.useUppercase&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.useLowercase&&(t+="abcdefghijklmnopqrstuvwxyz"),e.useDigits&&(t+="0123456789"),e.useSymbols&&(t+=e.symbols);var o="";do{if(o=n(e.passwordLength,t),Date.now()-a>=1e3*s)return null}while(!r(o,e));return o}(e.data.messageData.options,e.data.messageData.timeout);null!==s?self.postMessage({messageType:"RESPONSE_GENERATE_PASSWORD",responseCode:"OK",messageData:{password:s,requestId:e.data.messageData.requestId}}):self.postMessage({messageType:"RESPONSE_GENERATE_PASSWORD",responseCode:"TIMEOUT",messageData:{requestId:e.data.messageData.requestId}})}catch(s){self.postMessage({messageType:"RESPONSE_GENERATE_PASSWORD",responseCode:"ERROR",messageData:{message:s.message,requestId:e.data.messageData.requestId}})}}))}();